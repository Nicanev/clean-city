import{_ as c,a as g,r as u,o as i,b as d,d as m,e,w as n,v as r,f as v,g as k,h as w,c as f}from"./index.ac53b162.js";const y={name:"LoginForm",data(){return{login:"",password:"",error:!1}},methods:{signIn(){g.post("http://clean-city/public/api/login",{username:this.login,password:this.password}).then(function(_){localStorage.setItem("token",_.data.token),localStorage.setItem("user",_.data.name),location.reload()}).catch(()=>{this.error=!0})}}},b={class:"auth__body"},x=e("div",{class:"auth__title"},"\u0412\u0445\u043E\u0434",-1),V={key:0,class:"error"},$={onsubmit:"return false;",class:"auth__form form"},F={class:"form__item"},L=e("label",null,"\u041B\u043E\u0433\u0438\u043D",-1),R={class:"form__item"},q=e("label",null,"\u041F\u0430\u0440\u043E\u043B\u044C",-1),U={class:"form__item"},I=e("div",{class:"form__link"},[e("a",{href:"#"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F")],-1);function C(_,t,p,h,o,l){const a=u("RouterLink");return i(),d("div",b,[x,o.error?(i(),d("div",V," \u0414\u0430\u043D\u043D\u044B\u0435 \u0432\u0432\u0435\u0434\u0435\u043D\u044B \u043D\u0435 \u0432\u0435\u0440\u043D\u043E! ")):m("",!0),e("form",$,[e("div",F,[n(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>o.login=s),type:"text",required:""},null,512),[[r,o.login]]),L]),e("div",R,[n(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.password=s),type:"password",required:""},null,512),[[r,o.password]]),q]),e("div",U,[e("button",{onClick:t[2]||(t[2]=(...s)=>l.signIn&&l.signIn(...s))},"\u0412\u043E\u0439\u0442\u0438 \u0432 \u043B\u0438\u0447\u043D\u044B\u0439 \u043A\u0430\u0431\u0438\u043D\u0435\u0442")]),v(a,{to:"/register"},{default:k(()=>[I]),_:1})])])}const B=c(y,[["render",C]]),N={name:"RegisterForm",data(){return{login:"",first_name:"",last_name:"",password:"",email:"",error:!1}},methods:{register(){g.post("http://clean-city/public/api/register",{login:this.login,first_name:this.first_name,last_name:this.last_name,password:this.password,email:this.email}).then(function(){w.push("/login")}).catch(()=>{this.error=!0})}}},S={class:"auth__body"},A=e("div",{class:"auth__title"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F",-1),D={key:0,class:"error"},E={onsubmit:"return false;",class:"auth__form form"},M={class:"form__item"},T=e("label",null,"\u041F\u043E\u0447\u0442\u0430",-1),j={class:"form__item"},z=e("label",null,"\u041B\u043E\u0433\u0438\u043D",-1),G={class:"form__item"},H=e("label",null,"\u0418\u043C\u044F",-1),J={class:"form__item"},K=e("label",null,"\u0424\u0430\u043C\u0438\u043B\u0438\u044F",-1),O={class:"form__item"},P=e("label",null,"\u041F\u0430\u0440\u043E\u043B\u044C",-1),Q={class:"form__item"},W=e("div",{class:"form__link"},[e("a",{href:"#"},"\u0412\u043E\u0439\u0442\u0438")],-1);function X(_,t,p,h,o,l){const a=u("RouterLink");return i(),d("div",S,[A,o.error?(i(),d("div",D," \u0414\u0430\u043D\u043D\u044B\u0435 \u0432\u0432\u0435\u0434\u0435\u043D\u044B \u043D\u0435 \u0432\u0435\u0440\u043D\u043E! ")):m("",!0),e("form",E,[e("div",M,[n(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>o.email=s),required:""},null,512),[[r,o.email]]),T]),e("div",j,[n(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=s=>o.login=s),required:""},null,512),[[r,o.login]]),z]),e("div",G,[n(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=s=>o.first_name=s),required:""},null,512),[[r,o.first_name]]),H]),e("div",J,[n(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=s=>o.last_name=s),required:""},null,512),[[r,o.last_name]]),K]),e("div",O,[n(e("input",{type:"password","onUpdate:modelValue":t[4]||(t[4]=s=>o.password=s),required:""},null,512),[[r,o.password]]),P]),e("div",Q,[e("button",{onClick:t[5]||(t[5]=(...s)=>l.register&&l.register(...s))},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C\u0441\u044F")]),v(a,{to:"/login"},{default:k(()=>[W]),_:1})])])}const Y=c(N,[["render",X]]);const Z={components:{RegisterForm:Y,LoginForm:B},mounted(){localStorage.getItem("token")&&w.push("/profile")}},ee={class:"auth"},te={class:"auth__container"};function se(_,t,p,h,o,l){const a=u("LoginForm"),s=u("RegisterForm");return i(),d("div",ee,[e("div",te,[this.$route.name==="login"?(i(),f(a,{key:0})):m("",!0),this.$route.name==="register"?(i(),f(s,{key:1})):m("",!0)])])}const ne=c(Z,[["render",se]]);export{ne as default};
